# Игра с визуальным программированием робота

## Описание
Это образовательная игра, в которой игроки учат основы программирования, создавая последовательности команд для управления роботом.

## Структура проекта

```
Assets/
├── Scripts/
│   ├── Core/              # Основные игровые системы
│   ├── UI/                # Компоненты пользовательского интерфейса
│   └── GameManager.cs     # Главный игровой менеджер
├── Prefabs/               # Префабы игровых объектов
├── Resources/             # Ресурсы игры (уровни, звуки и т.д.)
└── Scenes/                # Сцены игры
```

## Основные компоненты

### Core системы:
- **GameManager** - Центральный менеджер игры
- **LevelManager** - Управление уровнями
- **RobotController** - Управление роботом
- **ProgramInterpreter** - Интерпретатор программ
- **AudioManager** - Управление звуком
- **SceneCleanupManager** - Очистка памяти при переходах

### UI компоненты:
- **WorkspacePanel** - Панель создания программ
- **DropZone** - Зоны для размещения блоков
- **MainMenuManager** - Главное меню
- **GameUIController** - Игровой интерфейс

## Как запустить игру

1. Откройте проект в Unity
2. Откройте сцену MainMenu
3. Нажмите Play

## Управление

### В главном меню:
- **Play** - Начать игру с первого уровня
- **Levels** - Выбор уровня
- **Settings** - Настройки игры
- **Quit** - Выход из игры

### Во время игры:
- **Пробел** - Запуск/пауза программы
- **R** - Сброс программы
- **Esc** - Пауза/меню

### В рабочей области:
- Перетаскивайте блоки команд из палитры в рабочую область
- Используйте кнопки Undo/Redo для отмены действий
- Нажмите Clear для очистки всей рабочей области

## Решение проблем

### Игра зависает или работает медленно:
1. Проверьте, не запущены ли несколько копий корутин
2. Убедитесь, что все события отписываются при уничтожении объектов
3. Используйте SceneCleanupManager для переходов между сценами

### Утечки памяти:
1. Все MonoBehaviour должны отписываться от событий в OnDestroy
2. Используйте SceneCleanupManager.ForceCleanup() для принудительной очистки
3. Проверяйте, что все корутины останавливаются при уничтожении объектов

### Проблемы с паузой:
1. Убедитесь, что Time.timeScale сбрасывается при выходе в меню
2. Используйте ResumeGame() перед переходами между сценами

## Горячие клавиши для разработчиков

- **F1** - Показать состояние всех систем
- **F2** - Переключить отображение информации о памяти
- **F3** - Принудительная сборка мусора

## Добавление новых уровней

1. Создайте новый LevelData в Resources/Levels
2. Назовите его Level_XX (где XX - номер уровня)
3. Настройте параметры уровня
4. Уровень автоматически появится в выборе уровней

## Добавление новых команд

1. Создайте новый класс, наследующий CommandBlock
2. Реализуйте метод Execute()
3. Добавьте команду в BlockPalette
4. Обновите локализацию

## Оптимизация

1. Используйте MemoryMonitor для отслеживания утечек
2. Проверяйте GameIntegrityChecker для диагностики проблем
3. Используйте SystemTester для тестирования систем

## Поддержка

Если у вас возникли проблемы:
1. Проверьте логи в консоли Unity
2. Запустите GameIntegrityChecker.QuickCheck()
3. Используйте SceneCleanupManager.ForceCleanup()
4. Обратитесь к документации в SYSTEM_DOCUMENTATION.md